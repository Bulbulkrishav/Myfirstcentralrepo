pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                deleteDir()
                checkout scm
            }
        }
        stage('build') {
            steps {
                withAWS(credentials: 'aws-cli-auth-cred', region: 'us-east-1') {
                sh '''
                echo "hello world"
                ls -ltr
                aws cloudformation create-stack --stack-name EC2-CFT-1 --template-body file://EC2-single.yml --parameters ParameterKey=KeyName,ParameterValue=linuxpractice
                '''
                }
            }
        }
    }
}